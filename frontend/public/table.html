<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Table</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link id="dark-mode" rel="stylesheet" href="">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="./js/table.js" defer></script>
</head>

<body data-page="table">
    <div class="container-sm" id="mainContainer">

        <div class="d-none" id="contentContainer">
            <!-- Add Entry and Search/Sort Section -->
            <div id="search-bar" class="d-flex justify-content-between mt-2 mb-2">

                <!-- Search, filter and add entry bar -->
                <div class="col-md-4 d-flex align-items-center justify-content-start">

                    <!-- Search Input -->
                    <div id="searchWrapper" class="position-relative me-2">
                        <input type="text" id="searchInput" class="form-control pe-5"
                            placeholder="Search student name...">
                        <i id="clearSearch" class="bi bi-x text-muted position-absolute"></i>
                    </div>

                    <div class="dropdown" style="height: 38px;">
                        <!-- Main Filter Trigger -->
                        <button class="btn btn-light d-flex align-items-center h-100" id="filterMenuButton"
                            data-bs-toggle="dropdown">
                            <i class="bi bi-filter me-2"></i>
                            <span>Filter</span>
                            <i id="clearFilter" class="bi bi-x ms-2 text-muted" style="display: none;"></i>
                        </button>

                        <!-- Main Dropdown Menu -->
                        <ul class="dropdown-menu" aria-labelledby="filterMenuButton">

                            <!-- Supervisor Submenu -->
                            <li class="dropdown-submenu dropend">
                                <a class="dropdown-item dropdown-toggle" href="#" id="supervisorDropdown" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Supervisor
                                </a>

                                <!-- Nested Dropdown for Supervisors -->
                                <ul class="dropdown-menu" aria-labelledby="supervisorDropdown">
                                    <!-- Dynamically generate the supervisors -->
                                </ul>
                            </li>

                            <!-- Year Submenu -->
                            <li class="dropdown-submenu dropend">
                                <a class="dropdown-item dropdown-toggle" href="#" id="yearDropdown" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Year
                                </a>

                                <!-- Nested Dropdown for Years -->
                                <ul class="dropdown-menu" aria-labelledby="yearDropdown">
                                    <!-- Dynamically generate the year -->
                                </ul>
                            </li>

                            <!-- Inactive Toggle -->
                            <li>
                                <a class="dropdown-item" href="#" data-filter="inactive">
                                    Inactive
                                </a>
                            </li>
                        </ul>
                    </div>


                </div>

                <!-- Add Entry Button -->
                <button class="btn btn-primary ms-auto" id="showFormButton" data-bs-toggle="modal"
                    data-bs-target="#addEntryModal">
                    Add Entry
                </button>
            </div>

            <div id="filterDropdown" class="dropdown-menu" style="display: none;">
                <!-- Inactive filter option -->
                <a class="dropdown-item" href="#" data-filter="inactive">Inactive</a>

                <!-- Parent option with submenu -->
                <div class="dropdown-submenu">
                    <a class="dropdown-item dropdown-toggle" href="#" data-filter="submenu"
                        id="supervisorDropdown">Supervisor</a>
                    <div id="supervisorSubmenu" class="dropdown-menu"
                        style="display: none; position: absolute; left: 100%; top: 40%;">
                        <!-- dynamically populated teachers here -->
                    </div>
                </div>
            </div>

            <!-- Student Table -->
            <div id="table-container" class="table-container">
                <table class="table table-sm align-middle">
                    <!-- Column names -->
                    <thead>
                        <tr id="table-header">
                            <th>Adept</th>
                            <th>Alias</th>
                            <th class="sortable" data-key="credits">
                                <div class="sortable-content">
                                    SP <i class="bi bi-arrow-down-up"></i>
                                </div>
                            </th>
                            <th class="sortable" data-key="status">
                                <div class="sortable-content">
                                    Status <i class="bi bi-arrow-down-up"></i>
                                </div>
                            </th>
                            <th>Handledare</th>
                            <th>Handledarens kommentar</th>
                            <th class="sortable text-end" data-key="updated">
                                <div class="sortable-content">
                                    Uppdaterad <i class="bi bi-arrow-down-up"></i>
                                </div>
                            </th>
                        </tr>
                    </thead>

                    <!-- Main table with all the students data (updated dynamically) -->
                    <tbody id="studentTable"></tbody>
                </table>
            </div>

            <!-- Modal container -->
            <div id="modal-container"></div>
        </div>
    </div>

</body>

</html>